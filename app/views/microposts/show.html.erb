<p id="notice"><%= notice %></p>


<p>
  <strong>Title:</strong>
  <%= @micropost.title %>
</p>

<p>
  <strong>Description:</strong>
  <%= @micropost.description %>
</p>

<p>
  <strong>User:</strong>
  <%= @micropost.user_id %>
</p>

<p>
  <strong>CurrentUser:</strong>
  <%= current_user.uid %>
</p>

<h2>All Comments:</h2>
<% @micropost.comments.each do |comment| %>
  <p>
    <strong>Comment:</strong>
    <%= comment.body %>
  
    <font color="blue">User :</font>
    <%= comment.user.first_name  %>
    <%=  comment.user.last_name %>
    
    <font color="green">Creat fa :</font>
    <%= time_ago_in_words(comment.created_at) %>
    
    <!--if user.uid == comment.user.uid then  (Nomes els creadors del comentari veuràn els botons d'Edit i Delete d'aquest)-->
    
    
    <% if request.query_parameters["edit"] == comment.id.to_s then %>
          <div id="myform">
            <%= form_for [@micropost, comment] do |f| %>
            <%= f.text_area :body %><br/>
            <%= f.submit "Update Comment", class: "comment" %>
            <% end %>
          </div>
  <% end %>
  
  <a href="?edit=<%= comment.id %>">Edit</a>
    
    <button style="border-color:red" type="button" class="btn btn-danger"><%= link_to 'Delete',comment, method: :delete, data: { confirm: 'Estàs segur?' }%></button>&nbsp;
    <!--  end  (de la comprovació del current user es el mateix que el creador del comentari)-->
  </p>
<% end %>

<h2>Add a comment:</h2>
<%= form_for([@micropost, @micropost.comments.new]) do |f| %>
  <p>
    <%= f.label :body %><br>
    <%= f.text_area :body %>
  </p>
  <p>
    <%= f.submit %>
  </p>
<% end %>

<%= link_to 'Edit', edit_micropost_path(@micropost) %> |
<%= link_to 'Back', microposts_path %>
